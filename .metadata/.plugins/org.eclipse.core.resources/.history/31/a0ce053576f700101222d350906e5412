package com.rydlo.service;

import org.modelmapper.ModelMapper;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import com.rydlo.Repository.UserRepository;
import com.rydlo.dto.UserRegDTO;
import com.rydlo.entities.User;

import jakarta.validation.Valid;

@Service
@Transactional
public class UserServiceIMPL implements UserService {

    private final UserRepository userRepository;
    private final ModelMapper modelMapper;

    public UserServiceIMPL(UserRepository userRepository,
                           ModelMapper modelMapper) {
        this.userRepository = userRepository;
        this.modelMapper = modelMapper;
    }

    @Override
    public String addUser(@Valid UserRegDTO userDto) {

        User user = modelMapper.map(userDto, User.class);

        User persistentUser = userRepository.save(user);

        return "User added with user id = " + persistentUser.getId();
    }
}